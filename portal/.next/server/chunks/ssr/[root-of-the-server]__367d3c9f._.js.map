{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/CaseActions.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\n\ntype Props = {\n  caseId: string;\n  role: \"customer\" | \"lab\" | \"admin\";\n  currentStatus: string;\n};\n\nexport default function CaseActions({ caseId, role, currentStatus }: Props) {\n  const [note, setNote] = useState(\"\");\n\n  async function change(to: string) {\n    const r = await fetch(`/api/cases/${caseId}/transition`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ to, note }),\n    });\n    if (r.ok) window.location.reload();\n    else {\n      const j = await r.json().catch(() => ({}));\n      alert(j.error || \"Action failed\");\n    }\n  }\n\n  const canCustomer = new Set([\"APPROVED\", \"CHANGES_REQUESTED\"]);\n  const showApprove = role !== \"customer\" || canCustomer.has(\"APPROVED\");\n  const showRequest = role !== \"customer\" || canCustomer.has(\"CHANGES_REQUESTED\");\n\n  return (\n    <div className=\"space-y-3\">\n      <textarea\n        value={note}\n        onChange={(e) => setNote(e.target.value)}\n        placeholder=\"Add a short note (optional)\"\n        className=\"w-full h-20 rounded-lg p-2 bg-black/40 border border-white/10 text-white\"\n      />\n      <div className=\"flex gap-2\">\n        {showApprove && (\n          <button onClick={() => change(\"APPROVED\")} className=\"rounded-lg px-3 py-2 bg-white text-black\">\n            Approve\n          </button>\n        )}\n        {showRequest && (\n          <button onClick={() => change(\"CHANGES_REQUESTED\")} className=\"rounded-lg px-3 py-2 border border-white/20\">\n            Request changes\n          </button>\n        )}\n      </div>\n      <p className=\"text-xs text-white/50\">Current: {currentStatus}</p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AASe,SAAS,YAAY,EAAE,MAAM,EAAE,IAAI,EAAE,aAAa,EAAS;IACxE,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IAEjC,eAAe,OAAO,EAAU;QAC9B,MAAM,IAAI,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,WAAW,CAAC,EAAE;YACvD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;gBAAI;YAAK;QAClC;QACA,IAAI,EAAE,EAAE,EAAE,OAAO,QAAQ,CAAC,MAAM;aAC3B;YACH,MAAM,IAAI,MAAM,EAAE,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACxC,MAAM,EAAE,KAAK,IAAI;QACnB;IACF;IAEA,MAAM,cAAc,IAAI,IAAI;QAAC;QAAY;KAAoB;IAC7D,MAAM,cAAc,SAAS,cAAc,YAAY,GAAG,CAAC;IAC3D,MAAM,cAAc,SAAS,cAAc,YAAY,GAAG,CAAC;IAE3D,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,OAAO;gBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACvC,aAAY;gBACZ,WAAU;;;;;;0BAEZ,8OAAC;gBAAI,WAAU;;oBACZ,6BACC,8OAAC;wBAAO,SAAS,IAAM,OAAO;wBAAa,WAAU;kCAA2C;;;;;;oBAIjG,6BACC,8OAAC;wBAAO,SAAS,IAAM,OAAO;wBAAsB,WAAU;kCAA8C;;;;;;;;;;;;0BAKhH,8OAAC;gBAAE,WAAU;;oBAAwB;oBAAU;;;;;;;;;;;;;AAGrD","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/FileUploader.tsx"],"sourcesContent":["// components/FileUploader.tsx\n\"use client\";\nimport { useState } from \"react\";\n\ntype Role = \"customer\" | \"lab\" | \"admin\";\n\nexport default function FileUploader({\n  caseId,\n  role,\n  slot, // \"scan\" | \"design_with_model\" | \"design_only\"\n}: {\n  caseId: string;\n  role: Role;\n  slot: \"scan\" | \"design_with_model\" | \"design_only\";\n}) {\n  const [busy, setBusy] = useState(false);\n  const [err, setErr] = useState<string | undefined>();\n  const [ok, setOk] = useState<string | undefined>();\n  const [file, setFile] = useState<File | null>(null);\n\n  if (role === \"customer\") return null;\n\n  const accept =\n    slot === \"scan\" ? \".stl,.ply,.obj\" : \".stl\";\n\n  const labelText =\n    slot === \"scan\" ? \"Upload scan (STL/PLY/OBJ)\"\n    : slot === \"design_with_model\" ? \"Upload design + model (STL)\"\n    : \"Upload design only (STL)\";\n\n  async function onFileChange(e: React.ChangeEvent<HTMLInputElement>) {\n    const f = e.target.files?.[0] || null;\n    setFile(f);\n    setErr(undefined);\n    setOk(undefined);\n  }\n\n  async function send() {\n    if (!file) return setErr(\"Please choose a file first.\");\n    setBusy(true);\n    setErr(undefined);\n    setOk(undefined);\n    try {\n      const fd = new FormData();\n      fd.append(\"label\", slot);\n      fd.append(\"files\", file);\n      const r = await fetch(`/api/cases/${caseId}/files`, { method: \"POST\", body: fd });\n      const j = await r.json().catch(() => ({}));\n      if (!r.ok) throw new Error(j.error || \"Upload failed\");\n      setOk(\"Uploaded successfully.\");\n      // Reload to show the new model\n      setTimeout(() => window.location.reload(), 600);\n    } catch (e: any) {\n      setErr(e?.message || \"Upload failed\");\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"text-sm text-white/70\">{labelText}</div>\n\n      <label className=\"flex items-center justify-between gap-3 rounded-lg p-3 bg-black/40 border border-white/10 cursor-pointer\">\n        <div className=\"flex-1 text-white/80\">\n          {file ? (\n            <>\n              <div className=\"font-medium truncate\">{file.name}</div>\n              <div className=\"text-xs text-white/60\">\n                {(file.size / (1024 * 1024)).toFixed(2)} MB\n              </div>\n            </>\n          ) : (\n            <div className=\"text-white/60\">Choose a file…</div>\n          )}\n        </div>\n        <div className=\"shrink-0 rounded-md bg-white text-black px-3 py-1.5 text-sm\">\n          Browse\n        </div>\n        <input\n          type=\"file\"\n          accept={accept}\n          onChange={onFileChange}\n          className=\"hidden\"\n        />\n      </label>\n\n      <div className=\"flex items-center gap-2\">\n        <button\n          onClick={send}\n          disabled={busy || !file}\n          className=\"rounded-lg px-3 py-1.5 bg-white text-black disabled:opacity-50\"\n        >\n          {busy ? \"Uploading…\" : \"Upload\"}\n        </button>\n        {ok && <span className=\"text-emerald-400 text-sm\">{ok}</span>}\n        {err && <span className=\"text-red-400 text-sm\">{err}</span>}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,8BAA8B;;;;;;AAE9B;AADA;;;AAKe,SAAS,aAAa,EACnC,MAAM,EACN,IAAI,EACJ,IAAI,EAKL;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ;IAC9B,MAAM,CAAC,IAAI,MAAM,GAAG,IAAA,iNAAQ;IAC5B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAE9C,IAAI,SAAS,YAAY,OAAO;IAEhC,MAAM,SACJ,SAAS,SAAS,mBAAmB;IAEvC,MAAM,YACJ,SAAS,SAAS,8BAChB,SAAS,sBAAsB,gCAC/B;IAEJ,eAAe,aAAa,CAAsC;QAChE,MAAM,IAAI,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;QACjC,QAAQ;QACR,OAAO;QACP,MAAM;IACR;IAEA,eAAe;QACb,IAAI,CAAC,MAAM,OAAO,OAAO;QACzB,QAAQ;QACR,OAAO;QACP,MAAM;QACN,IAAI;YACF,MAAM,KAAK,IAAI;YACf,GAAG,MAAM,CAAC,SAAS;YACnB,GAAG,MAAM,CAAC,SAAS;YACnB,MAAM,IAAI,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,MAAM,CAAC,EAAE;gBAAE,QAAQ;gBAAQ,MAAM;YAAG;YAC/E,MAAM,IAAI,MAAM,EAAE,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACxC,IAAI,CAAC,EAAE,EAAE,EAAE,MAAM,IAAI,MAAM,EAAE,KAAK,IAAI;YACtC,MAAM;YACN,+BAA+B;YAC/B,WAAW,IAAM,OAAO,QAAQ,CAAC,MAAM,IAAI;QAC7C,EAAE,OAAO,GAAQ;YACf,OAAO,GAAG,WAAW;QACvB,SAAU;YACR,QAAQ;QACV;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BAAyB;;;;;;0BAExC,8OAAC;gBAAM,WAAU;;kCACf,8OAAC;wBAAI,WAAU;kCACZ,qBACC;;8CACE,8OAAC;oCAAI,WAAU;8CAAwB,KAAK,IAAI;;;;;;8CAChD,8OAAC;oCAAI,WAAU;;wCACZ,CAAC,KAAK,IAAI,GAAG,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;wCAAG;;;;;;;;yDAI5C,8OAAC;4BAAI,WAAU;sCAAgB;;;;;;;;;;;kCAGnC,8OAAC;wBAAI,WAAU;kCAA8D;;;;;;kCAG7E,8OAAC;wBACC,MAAK;wBACL,QAAQ;wBACR,UAAU;wBACV,WAAU;;;;;;;;;;;;0BAId,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS;wBACT,UAAU,QAAQ,CAAC;wBACnB,WAAU;kCAET,OAAO,eAAe;;;;;;oBAExB,oBAAM,8OAAC;wBAAK,WAAU;kCAA4B;;;;;;oBAClD,qBAAO,8OAAC;wBAAK,WAAU;kCAAwB;;;;;;;;;;;;;;;;;;AAIxD","debugId":null}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/MeshViewer.tsx"],"sourcesContent":["// components/MeshViewer.tsx\n\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\n// @ts-ignore\nimport { STLLoader } from \"three/examples/jsm/loaders/STLLoader.js\";\n// @ts-ignore\nimport { PLYLoader } from \"three/examples/jsm/loaders/PLYLoader.js\";\n// @ts-ignore\nimport { OBJLoader } from \"three/examples/jsm/loaders/OBJLoader.js\";\n// @ts-ignore\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls.js\";\n\ntype Props = { url: string; height?: number; autoRotate?: boolean };\n\nexport default function MeshViewer({ url, height = 360, autoRotate = false }: Props) {\n  const host = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    if (!host.current) return;\n    const el = host.current;\n    el.innerHTML = \"\";\n\n    const scene = new THREE.Scene();\n    const camera = new THREE.PerspectiveCamera(45, el.clientWidth / height, 0.1, 5000);\n    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });\n    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n    renderer.setSize(el.clientWidth, height);\n    el.appendChild(renderer.domElement);\n\n    const hemi = new THREE.HemisphereLight(0xffffff, 0x444444, 1.1);\n    scene.add(hemi);\n    const dir = new THREE.DirectionalLight(0xffffff, 0.9);\n    dir.position.set(1, 1, 1);\n    scene.add(dir);\n\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.enableDamping = true;\n    controls.autoRotate = autoRotate;\n    controls.autoRotateSpeed = 1.2;\n\n    function fitAndAdd(geom: THREE.BufferGeometry) {\n      geom.computeVertexNormals?.();\n      geom.computeBoundingBox();\n      const bb = geom.boundingBox!;\n      const size = new THREE.Vector3().subVectors(bb.max, bb.min);\n      const center = new THREE.Vector3().addVectors(bb.min, bb.max).multiplyScalar(0.5);\n\n      const mat = new THREE.MeshStandardMaterial({ metalness: 0.15, roughness: 0.45 });\n      const mesh = new THREE.Mesh(geom, mat);\n      mesh.position.sub(center);\n      scene.add(mesh);\n\n      const maxDim = Math.max(size.x, size.y, size.z);\n      const fov = camera.fov * (Math.PI / 180);\n      let distance = Math.abs(maxDim / (2 * Math.tan(fov / 2)));\n      distance *= 1.7;\n      camera.position.set(0, 0, distance);\n      camera.near = distance / 100;\n      camera.far = distance * 100;\n      camera.updateProjectionMatrix();\n      controls.update();\n    }\n\n    const ext = url.split(\".\").pop()?.toLowerCase();\n\n    if (ext === \"stl\") {\n      new STLLoader().load(url, (geom: any) => fitAndAdd(geom));\n    } else if (ext === \"ply\") {\n      new PLYLoader().load(url, (geom: any) => fitAndAdd(geom));\n    } else if (ext === \"obj\") {\n      new OBJLoader().load(url, (obj: any) => {\n        // merge all geometry into one for framing (simple)\n        const box = new THREE.Box3().setFromObject(obj);\n        const size = new THREE.Vector3();\n        box.getSize(size);\n        const center = new THREE.Vector3();\n        box.getCenter(center);\n        obj.position.sub(center);\n        scene.add(obj);\n\n        const maxDim = Math.max(size.x, size.y, size.z);\n        const fov = camera.fov * (Math.PI / 180);\n        let distance = Math.abs(maxDim / (2 * Math.tan(fov / 2)));\n        distance *= 1.7;\n        camera.position.set(0, 0, distance);\n        camera.near = distance / 100;\n        camera.far = distance * 100;\n        camera.updateProjectionMatrix();\n        controls.update();\n      });\n    } else {\n      const txt = document.createElement(\"div\");\n      txt.className = \"text-white/60 text-sm\";\n      txt.innerText = \"Unsupported format\";\n      el.appendChild(txt);\n    }\n\n    let raf = 0;\n    const loop = () => {\n      controls.update();\n      renderer.render(scene, camera);\n      raf = requestAnimationFrame(loop);\n    };\n    loop();\n\n    const onResize = () => {\n      if (!host.current) return;\n      const w = host.current.clientWidth;\n      camera.aspect = w / height;\n      camera.updateProjectionMatrix();\n      renderer.setSize(w, height);\n    };\n    window.addEventListener(\"resize\", onResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", onResize);\n      cancelAnimationFrame(raf);\n      renderer.dispose();\n      el.innerHTML = \"\";\n    };\n  }, [url, height, autoRotate]);\n\n  return <div ref={host} className=\"w-full\" style={{ height }} />;\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 420, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/ProgressTracker.tsx"],"sourcesContent":["\"use client\";\n\ntype Stage = \"DESIGN\" | \"MILLING_GLAZING\" | \"SHIPPING\";\n\nexport default function ProgressTracker({\n  stage,\n  onClickStage,\n}: {\n  stage: Stage;\n  onClickStage?: (s: Stage) => void;\n}) {\n  const order: Stage[] = [\"DESIGN\", \"MILLING_GLAZING\", \"SHIPPING\"];\n  const idx = order.indexOf(stage);\n\n  const label = (s: Stage) =>\n    s === \"DESIGN\" ? \"Design\"\n    : s === \"MILLING_GLAZING\" ? \"Milling & Glazing\"\n    : \"Shipping\";\n\n  return (\n    <div className=\"space-y-2\">\n      <div className=\"flex items-center gap-2\">\n        {order.map((s, i) => {\n          const active = i <= idx;\n          const common = \"flex-1 h-2 rounded-full transition-colors\";\n          return (\n            <button\n              key={s}\n              type=\"button\"\n              onClick={() => onClickStage?.(s)}\n              title={label(s)}\n              aria-label={label(s)}\n              className={`${common} ${active ? \"bg-white\" : \"bg-white/20\"} ${\n                onClickStage ? \"cursor-pointer\" : \"cursor-default\"\n              }`}\n            />\n          );\n        })}\n      </div>\n      <div className=\"flex justify-between text-xs text-white/70\">\n        {order.map((s) => (\n          <span key={s}>{label(s)}</span>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAIe,SAAS,gBAAgB,EACtC,KAAK,EACL,YAAY,EAIb;IACC,MAAM,QAAiB;QAAC;QAAU;QAAmB;KAAW;IAChE,MAAM,MAAM,MAAM,OAAO,CAAC;IAE1B,MAAM,QAAQ,CAAC,IACb,MAAM,WAAW,WACf,MAAM,oBAAoB,sBAC1B;IAEJ,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,GAAG;oBACb,MAAM,SAAS,KAAK;oBACpB,MAAM,SAAS;oBACf,qBACE,8OAAC;wBAEC,MAAK;wBACL,SAAS,IAAM,eAAe;wBAC9B,OAAO,MAAM;wBACb,cAAY,MAAM;wBAClB,WAAW,GAAG,OAAO,CAAC,EAAE,SAAS,aAAa,cAAc,CAAC,EAC3D,eAAe,mBAAmB,kBAClC;uBAPG;;;;;gBAUX;;;;;;0BAEF,8OAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,kBACV,8OAAC;kCAAc,MAAM;uBAAV;;;;;;;;;;;;;;;;AAKrB","debugId":null}},
    {"offset": {"line": 485, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/StageControls.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport ProgressTracker from \"@/components/ProgressTracker\";\n\ntype Stage = \"DESIGN\" | \"MILLING_GLAZING\" | \"SHIPPING\";\ntype Role = \"customer\" | \"lab\" | \"admin\";\n\nexport default function StageControls({\n  caseId,\n  stage,\n  role,\n}: {\n  caseId: string;\n  stage: Stage;\n  role: Role;\n}) {\n  const [current, setCurrent] = useState<Stage>(stage);\n  const canEdit = role === \"lab\" || role === \"admin\";\n\n  async function setStage(s: Stage) {\n    if (!canEdit) return;\n    if (s === current) return;\n    const r = await fetch(`/api/cases/${caseId}/stage`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ stage: s }),\n    });\n    if (r.ok) {\n      setCurrent(s);\n      // refresh server data so timestamps update\n      if (typeof window !== \"undefined\") window.location.reload();\n    } else {\n      const j = await r.json().catch(() => ({}));\n      alert(j.error || \"Failed to update stage\");\n    }\n  }\n\n  return (\n    <div>\n      <ProgressTracker\n        stage={current}\n        onClickStage={canEdit ? setStage : undefined}\n      />\n      {!canEdit && (\n        <p className=\"mt-2 text-xs text-white/60\">\n          The lab updates these stages as your case progresses.\n        </p>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAQe,SAAS,cAAc,EACpC,MAAM,EACN,KAAK,EACL,IAAI,EAKL;IACC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAQ;IAC9C,MAAM,UAAU,SAAS,SAAS,SAAS;IAE3C,eAAe,SAAS,CAAQ;QAC9B,IAAI,CAAC,SAAS;QACd,IAAI,MAAM,SAAS;QACnB,MAAM,IAAI,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,MAAM,CAAC,EAAE;YAClD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE,OAAO;YAAE;QAClC;QACA,IAAI,EAAE,EAAE,EAAE;YACR,WAAW;YACX,2CAA2C;YAC3C;;QACF,OAAO;YACL,MAAM,IAAI,MAAM,EAAE,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YACxC,MAAM,EAAE,KAAK,IAAI;QACnB;IACF;IAEA,qBACE,8OAAC;;0BACC,8OAAC,yIAAe;gBACd,OAAO;gBACP,cAAc,UAAU,WAAW;;;;;;YAEpC,CAAC,yBACA,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAMlD","debugId":null}}]
}