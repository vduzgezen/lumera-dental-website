{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/UploadButtons.tsx"],"sourcesContent":["// components/UploadButtons.tsx\n\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\ntype Props = {\n  caseId: string;\n  label: \"SCAN\" | \"MODEL_PLUS_DESIGN\" | \"DESIGN_ONLY\";\n  accept: string;\n  title: string;\n  disabled?: boolean;\n};\n\nexport default function UploadButtons({\n  caseId,\n  label,\n  accept,\n  title,\n  disabled,\n}: Props) {\n  const [file, setFile] = useState<File | null>(null);\n  const [busy, setBusy] = useState(false);\n  const [msg, setMsg] = useState<string | null>(null);\n  const [err, setErr] = useState<string | null>(null);\n  const router = useRouter();\n\n  async function upload() {\n    setMsg(null);\n    setErr(null);\n    if (!file) return setErr(\"Choose a file first.\");\n    if (disabled) return setErr(\"This slot is locked at the current stage.\");\n\n    setBusy(true);\n    try {\n      const fd = new FormData();\n      fd.append(\"label\", label);\n      // best-effort kind based on extension\n      const ext = (file.name.split(\".\").pop() || \"\").toLowerCase();\n      const kind =\n        ext === \"stl\" ? \"STL\" : ext === \"ply\" ? \"PLY\" : ext === \"obj\" ? \"OBJ\" : \"OTHER\";\n      fd.append(\"kind\", kind);\n      fd.append(\"file\", file);\n\n      const res = await fetch(`/api/cases/${caseId}/files`, {\n        method: \"POST\",\n        body: fd,\n      });\n      const j = await res.json().catch(() => ({}));\n      if (!res.ok) throw new Error(j.error || \"Upload failed\");\n\n      setMsg(\"Saved.\");\n      setFile(null);\n      router.refresh();\n    } catch (e: any) {\n      setErr(e?.message || \"Upload failed\");\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <div className=\"rounded-xl border border-white/10 p-4\">\n      <h2 className=\"font-medium mb-2\">{title}</h2>\n      <div className=\"flex items-center gap-3\">\n        <input\n          type=\"file\"\n          accept={accept}\n          onChange={(e) => setFile(e.target.files?.[0] ?? null)}\n          className=\"text-sm\"\n          disabled={disabled}\n        />\n        <button\n          type=\"button\"\n          className=\"rounded-md bg-white text-black text-sm px-3 py-1.5 disabled:opacity-50\"\n          onClick={upload}\n          disabled={busy || disabled}\n        >\n          {busy ? \"Uploading…\" : \"Upload\"}\n        </button>\n      </div>\n      {disabled && (\n        <p className=\"text-xs text-white/50 mt-2\">\n          This slot can’t be changed at the current stage.\n        </p>\n      )}\n      {msg && <p className=\"text-emerald-400 text-sm mt-2\">{msg}</p>}\n      {err && <p className=\"text-red-400 text-sm mt-2\">{err}</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAG/B;AACA;AAHA;;;;AAae,SAAS,cAAc,EACpC,MAAM,EACN,KAAK,EACL,MAAM,EACN,KAAK,EACL,QAAQ,EACF;IACN,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAc;IAC9C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAC9C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAC9C,MAAM,SAAS,IAAA,+IAAS;IAExB,eAAe;QACb,OAAO;QACP,OAAO;QACP,IAAI,CAAC,MAAM,OAAO,OAAO;QACzB,IAAI,UAAU,OAAO,OAAO;QAE5B,QAAQ;QACR,IAAI;YACF,MAAM,KAAK,IAAI;YACf,GAAG,MAAM,CAAC,SAAS;YACnB,sCAAsC;YACtC,MAAM,MAAM,CAAC,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,EAAE,EAAE,WAAW;YAC1D,MAAM,OACJ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ,QAAQ;YAC1E,GAAG,MAAM,CAAC,QAAQ;YAClB,GAAG,MAAM,CAAC,QAAQ;YAElB,MAAM,MAAM,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,MAAM,CAAC,EAAE;gBACpD,QAAQ;gBACR,MAAM;YACR;YACA,MAAM,IAAI,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,EAAE,KAAK,IAAI;YAExC,OAAO;YACP,QAAQ;YACR,OAAO,OAAO;QAChB,EAAE,OAAO,GAAQ;YACf,OAAO,GAAG,WAAW;QACvB,SAAU;YACR,QAAQ;QACV;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAoB;;;;;;0BAClC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,QAAQ;wBACR,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE,IAAI;wBAChD,WAAU;wBACV,UAAU;;;;;;kCAEZ,8OAAC;wBACC,MAAK;wBACL,WAAU;wBACV,SAAS;wBACT,UAAU,QAAQ;kCAEjB,OAAO,eAAe;;;;;;;;;;;;YAG1B,0BACC,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;YAI3C,qBAAO,8OAAC;gBAAE,WAAU;0BAAiC;;;;;;YACrD,qBAAO,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAGxD","debugId":null}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/ProgressTracker.tsx"],"sourcesContent":["// components/ProgressTracker.tsx\n\"use client\";\n\ntype Stage = \"DESIGN\" | \"MILLING_GLAZING\" | \"SHIPPING\";\ntype Role = \"customer\" | \"lab\" | \"admin\";\n\nconst STAGES: Stage[] = [\"DESIGN\", \"MILLING_GLAZING\", \"SHIPPING\"];\n\nexport default function ProgressTracker({\n  caseId,\n  stage,\n  role,\n}: {\n  caseId: string;\n  stage: Stage;\n  role: Role;\n}) {\n  const activeIdx = STAGES.indexOf(stage);\n  const canAdvance = role === \"lab\" || role === \"admin\";\n\n  async function goTo(idx: number) {\n    if (!canAdvance) return;\n    const target = STAGES[idx];\n    // Map stage click → a status we store for auditing\n    const to =\n      target === \"DESIGN\"\n        ? \"IN_DESIGN\"\n        : target === \"MILLING_GLAZING\"\n        ? \"IN_MILLING\"\n        : \"SHIPPED\";\n\n    await fetch(`/api/cases/${caseId}/transition`, {\n      method: \"POST\",\n      headers: { \"content-type\": \"application/json\" },\n      body: JSON.stringify({ to }),\n    });\n    location.reload();\n  }\n\n  return (\n    <div className=\"rounded-xl border border-white/10 p-4\">\n      <div className=\"flex items-center justify-between\">\n        {STAGES.map((s, i) => {\n          const done = i < activeIdx;\n          const active = i === activeIdx;\n          return (\n            <button\n              key={s}\n              type=\"button\"\n              onClick={() => goTo(i)}\n              className={[\n                \"flex-1 mx-1 py-2 rounded-lg text-sm border\",\n                active\n                  ? \"bg-white text-black border-white\"\n                  : done\n                  ? \"bg-white/20 text-white border-white/20\"\n                  : \"bg-white/10 text-white/70 border-white/10\",\n                canAdvance ? \"cursor-pointer\" : \"cursor-default\",\n              ].join(\" \")}\n              disabled={!canAdvance}\n              title={canAdvance ? `Set stage to ${s}` : undefined}\n            >\n              {s.replace(\"_\", \" \")}\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;AACjC;;AAKA,MAAM,SAAkB;IAAC;IAAU;IAAmB;CAAW;AAElD,SAAS,gBAAgB,EACtC,MAAM,EACN,KAAK,EACL,IAAI,EAKL;IACC,MAAM,YAAY,OAAO,OAAO,CAAC;IACjC,MAAM,aAAa,SAAS,SAAS,SAAS;IAE9C,eAAe,KAAK,GAAW;QAC7B,IAAI,CAAC,YAAY;QACjB,MAAM,SAAS,MAAM,CAAC,IAAI;QAC1B,mDAAmD;QACnD,MAAM,KACJ,WAAW,WACP,cACA,WAAW,oBACX,eACA;QAEN,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,WAAW,CAAC,EAAE;YAC7C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE;YAAG;QAC5B;QACA,SAAS,MAAM;IACjB;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;sBACZ,OAAO,GAAG,CAAC,CAAC,GAAG;gBACd,MAAM,OAAO,IAAI;gBACjB,MAAM,SAAS,MAAM;gBACrB,qBACE,8OAAC;oBAEC,MAAK;oBACL,SAAS,IAAM,KAAK;oBACpB,WAAW;wBACT;wBACA,SACI,qCACA,OACA,2CACA;wBACJ,aAAa,mBAAmB;qBACjC,CAAC,IAAI,CAAC;oBACP,UAAU,CAAC;oBACX,OAAO,aAAa,CAAC,aAAa,EAAE,GAAG,GAAG;8BAEzC,EAAE,OAAO,CAAC,KAAK;mBAfX;;;;;YAkBX;;;;;;;;;;;AAIR","debugId":null}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/ActionsBar.tsx"],"sourcesContent":["// components/ActionsBar.tsx\n\"use client\";\n\nimport { useState } from \"react\";\n\ntype Role = \"customer\" | \"lab\" | \"admin\";\ntype Status =\n  | \"NEW\"\n  | \"IN_DESIGN\"\n  | \"READY_FOR_REVIEW\"\n  | \"CHANGES_REQUESTED\"\n  | \"APPROVED\"\n  | \"IN_MILLING\"\n  | \"SHIPPED\";\n\nexport default function ActionsBar({\n  caseId,\n  role,\n  status,\n}: {\n  caseId: string;\n  role: Role;\n  status: Status;\n}) {\n  const [note, setNote] = useState(\"\");\n  const [busy, setBusy] = useState(false);\n  const [msg, setMsg] = useState<string | null>(null);\n  const [err, setErr] = useState<string | null>(null);\n\n  const canDoctor = role === \"customer\";\n  const canLab = role === \"lab\" || role === \"admin\";\n\n  async function send(to: Status) {\n    setBusy(true);\n    setMsg(null);\n    setErr(null);\n    try {\n      const res = await fetch(`/api/cases/${caseId}/transition`, {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({ to, note: note || undefined }),\n      });\n      const j = await res.json().catch(() => ({}));\n      if (!res.ok) throw new Error(j.error || \"Action failed\");\n      setMsg(\"Saved.\");\n      setNote(\"\");\n      location.reload();\n    } catch (e: any) {\n      setErr(e?.message || \"Action failed\");\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <div className=\"rounded-xl border border-white/10 p-4\">\n      <div className=\"flex flex-wrap items-center gap-3\">\n        <input\n          type=\"text\"\n          value={note}\n          onChange={(e) => setNote(e.target.value)}\n          placeholder=\"Optional note…\"\n          className=\"px-3 py-1.5 rounded-md bg-white/10 border border-white/10 text-sm flex-1 min-w-[200px]\"\n        />\n\n        {/* Doctor actions */}\n        {canDoctor && (\n          <>\n            <button\n              disabled={busy}\n              onClick={() => send(\"APPROVED\")}\n              className=\"px-3 py-1.5 rounded-md bg-emerald-400 text-black text-sm\"\n            >\n              Approve\n            </button>\n            <button\n              disabled={busy}\n              onClick={() => send(\"CHANGES_REQUESTED\")}\n              className=\"px-3 py-1.5 rounded-md bg-amber-300 text-black text-sm\"\n            >\n              Request Changes\n            </button>\n          </>\n        )}\n\n        {/* Lab can mark ready for review, or move back to design */}\n        {canLab && (\n          <>\n            <button\n              disabled={busy}\n              onClick={() => send(\"READY_FOR_REVIEW\")}\n              className=\"px-3 py-1.5 rounded-md bg-white text-black text-sm\"\n            >\n              Ready for Review\n            </button>\n            <button\n              disabled={busy}\n              onClick={() => send(\"IN_DESIGN\")}\n              className=\"px-3 py-1.5 rounded-md bg-white/80 text-black text-sm\"\n            >\n              Back to Design\n            </button>\n          </>\n        )}\n      </div>\n\n      {msg && <p className=\"text-emerald-400 text-sm mt-2\">{msg}</p>}\n      {err && <p className=\"text-red-400 text-sm mt-2\">{err}</p>}\n\n      <p className=\"text-white/50 text-xs mt-2\">\n        Status now: <b>{status}</b>\n      </p>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,4BAA4B;;;;;;AAG5B;AAFA;;;AAce,SAAS,WAAW,EACjC,MAAM,EACN,IAAI,EACJ,MAAM,EAKP;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAC9C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAE9C,MAAM,YAAY,SAAS;IAC3B,MAAM,SAAS,SAAS,SAAS,SAAS;IAE1C,eAAe,KAAK,EAAU;QAC5B,QAAQ;QACR,OAAO;QACP,OAAO;QACP,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,WAAW,CAAC,EAAE;gBACzD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAI,MAAM,QAAQ;gBAAU;YACrD;YACA,MAAM,IAAI,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YAC1C,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,EAAE,KAAK,IAAI;YACxC,OAAO;YACP,QAAQ;YACR,SAAS,MAAM;QACjB,EAAE,OAAO,GAAQ;YACf,OAAO,GAAG,WAAW;QACvB,SAAU;YACR,QAAQ;QACV;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,MAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wBACvC,aAAY;wBACZ,WAAU;;;;;;oBAIX,2BACC;;0CACE,8OAAC;gCACC,UAAU;gCACV,SAAS,IAAM,KAAK;gCACpB,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,UAAU;gCACV,SAAS,IAAM,KAAK;gCACpB,WAAU;0CACX;;;;;;;;oBAOJ,wBACC;;0CACE,8OAAC;gCACC,UAAU;gCACV,SAAS,IAAM,KAAK;gCACpB,WAAU;0CACX;;;;;;0CAGD,8OAAC;gCACC,UAAU;gCACV,SAAS,IAAM,KAAK;gCACpB,WAAU;0CACX;;;;;;;;;;;;;;YAON,qBAAO,8OAAC;gBAAE,WAAU;0BAAiC;;;;;;YACrD,qBAAO,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAElD,8OAAC;gBAAE,WAAU;;oBAA6B;kCAC5B,8OAAC;kCAAG;;;;;;;;;;;;;;;;;;AAIxB","debugId":null}},
    {"offset": {"line": 381, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/CommentsPanel.tsx"],"sourcesContent":["// components/CommentsPanel.tsx\n\"use client\";\n\nimport { useState } from \"react\";\n\ntype Comment = {\n  id: string;\n  body: string;\n  at: string | Date;\n  author: string;\n  role: string;\n};\n\nexport default function CommentsPanel({\n  caseId,\n  comments,\n  canPost,\n}: {\n  caseId: string;\n  comments: Comment[];\n  canPost: boolean;\n}) {\n  const [body, setBody] = useState(\"\");\n  const [busy, setBusy] = useState(false);\n  const [err, setErr] = useState<string | null>(null);\n\n  async function submit() {\n    if (!body.trim()) return;\n    setBusy(true);\n    setErr(null);\n    try {\n      const res = await fetch(`/api/cases/${caseId}/comments`, {\n        method: \"POST\",\n        headers: { \"content-type\": \"application/json\" },\n        body: JSON.stringify({ body }),\n      });\n      if (!res.ok) throw new Error(\"Failed to post\");\n      setBody(\"\");\n      location.reload();\n    } catch (e: any) {\n      setErr(e?.message || \"Failed to post\");\n    } finally {\n      setBusy(false);\n    }\n  }\n\n  return (\n    <div className=\"rounded-xl border border-white/10 p-4\">\n      <h2 className=\"font-medium mb-3\">Discussion</h2>\n\n      {comments.length === 0 ? (\n        <p className=\"text-white/60 mb-3\">No comments yet.</p>\n      ) : (\n        <ul className=\"space-y-2 mb-3\">\n          {comments.map((c) => (\n            <li key={c.id} className=\"rounded-md bg-white/5 p-2\">\n              <div className=\"text-white/70 text-xs mb-1\">\n                {c.author} • {new Date(c.at).toLocaleString()} • {c.role}\n              </div>\n              <div>{c.body}</div>\n            </li>\n          ))}\n        </ul>\n      )}\n\n      {canPost && (\n        <div className=\"flex items-center gap-2\">\n          <input\n            className=\"flex-1 px-3 py-1.5 rounded-md bg-white/10 border border-white/10 text-sm\"\n            placeholder=\"Add a comment…\"\n            value={body}\n            onChange={(e) => setBody(e.target.value)}\n          />\n          <button\n            className=\"px-3 py-1.5 rounded-md bg-white text-black text-sm disabled:opacity-60\"\n            disabled={busy || !body.trim()}\n            onClick={submit}\n          >\n            Post\n          </button>\n        </div>\n      )}\n      {err && <p className=\"text-red-400 text-sm mt-2\">{err}</p>}\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;AAG/B;AAFA;;;AAYe,SAAS,cAAc,EACpC,MAAM,EACN,QAAQ,EACR,OAAO,EAKR;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,iNAAQ,EAAgB;IAE9C,eAAe;QACb,IAAI,CAAC,KAAK,IAAI,IAAI;QAClB,QAAQ;QACR,OAAO;QACP,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,SAAS,CAAC,EAAE;gBACvD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAK;YAC9B;YACA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;YAC7B,QAAQ;YACR,SAAS,MAAM;QACjB,EAAE,OAAO,GAAQ;YACf,OAAO,GAAG,WAAW;QACvB,SAAU;YACR,QAAQ;QACV;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAmB;;;;;;YAEhC,SAAS,MAAM,KAAK,kBACnB,8OAAC;gBAAE,WAAU;0BAAqB;;;;;qCAElC,8OAAC;gBAAG,WAAU;0BACX,SAAS,GAAG,CAAC,CAAC,kBACb,8OAAC;wBAAc,WAAU;;0CACvB,8OAAC;gCAAI,WAAU;;oCACZ,EAAE,MAAM;oCAAC;oCAAI,IAAI,KAAK,EAAE,EAAE,EAAE,cAAc;oCAAG;oCAAI,EAAE,IAAI;;;;;;;0CAE1D,8OAAC;0CAAK,EAAE,IAAI;;;;;;;uBAJL,EAAE,EAAE;;;;;;;;;;YAUlB,yBACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAU;wBACV,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;kCAEzC,8OAAC;wBACC,WAAU;wBACV,UAAU,QAAQ,CAAC,KAAK,IAAI;wBAC5B,SAAS;kCACV;;;;;;;;;;;;YAKJ,qBAAO,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAGxD","debugId":null}},
    {"offset": {"line": 521, "column": 0}, "map": {"version":3,"sources":["file:///Users/vedatcanduzgezen/Desktop/lumera-dental-website/portal/components/STLViewer.tsx"],"sourcesContent":["// components/STLViewer.tsx\n\"use client\";\n\nimport { useEffect, useRef } from \"react\";\nimport * as THREE from \"three\";\n// @ts-ignore – loader is ESM in three/examples\nimport { STLLoader } from \"three/examples/jsm/loaders/STLLoader.js\";\n\nexport default function STLViewer({ url }: { url: string }) {\n  const ref = useRef<HTMLDivElement | null>(null);\n\n  useEffect(() => {\n    if (!ref.current) return;\n\n    const width = ref.current.clientWidth;\n    const height = ref.current.clientHeight;\n\n    const scene = new THREE.Scene();\n    const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);\n    camera.position.set(0, 0, 120);\n\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(width, height);\n    renderer.setClearColor(0x0a0a0a);\n    ref.current.innerHTML = \"\";\n    ref.current.appendChild(renderer.domElement);\n\n    const light1 = new THREE.DirectionalLight(0xffffff, 1);\n    light1.position.set(1, 1, 1);\n    scene.add(light1);\n    const light2 = new THREE.AmbientLight(0x888888);\n    scene.add(light2);\n\n    const loader = new STLLoader();\n    let mesh: THREE.Mesh | null = null;\n\n    loader.load(\n      url,\n      (geometry: any) => {\n        geometry.center();\n        const material = new THREE.MeshPhongMaterial({ flatShading: true });\n        mesh = new THREE.Mesh(geometry, material);\n        scene.add(mesh);\n\n        const box = new THREE.Box3().setFromObject(mesh);\n        const size = new THREE.Vector3();\n        box.getSize(size);\n        const maxDim = Math.max(size.x, size.y, size.z);\n        camera.position.z = maxDim * 2.2;\n      },\n      undefined,\n      (err: any) => {\n        console.error(\"STL load failed\", err);\n      }\n    );\n\n    const controls = new (require(\"three/examples/jsm/controls/OrbitControls\").OrbitControls)(\n      camera,\n      renderer.domElement\n    );\n    controls.enableDamping = true;\n\n    let raf = 0;\n    const animate = () => {\n      raf = requestAnimationFrame(animate);\n      controls.update();\n      renderer.render(scene, camera);\n    };\n    animate();\n\n    const onResize = () => {\n      if (!ref.current) return;\n      const w = ref.current.clientWidth;\n      const h = ref.current.clientHeight;\n      renderer.setSize(w, h);\n      camera.aspect = w / h;\n      camera.updateProjectionMatrix();\n    };\n    window.addEventListener(\"resize\", onResize);\n\n    return () => {\n      cancelAnimationFrame(raf);\n      window.removeEventListener(\"resize\", onResize);\n      renderer.dispose();\n      scene.clear();\n    };\n  }, [url]);\n\n  return <div ref={ref} className=\"w-full h-full\" />;\n}\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;AAG3B;AACA;AAAA;AACA,+CAA+C;AAC/C;AALA;;;;;AAOe,SAAS,UAAU,EAAE,GAAG,EAAmB;IACxD,MAAM,MAAM,IAAA,+MAAM,EAAwB;IAE1C,IAAA,kNAAS,EAAC;QACR,IAAI,CAAC,IAAI,OAAO,EAAE;QAElB,MAAM,QAAQ,IAAI,OAAO,CAAC,WAAW;QACrC,MAAM,SAAS,IAAI,OAAO,CAAC,YAAY;QAEvC,MAAM,QAAQ,IAAI,wJAAW;QAC7B,MAAM,SAAS,IAAI,oKAAuB,CAAC,IAAI,QAAQ,QAAQ,KAAK;QACpE,OAAO,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG;QAE1B,MAAM,WAAW,IAAI,kLAAmB,CAAC;YAAE,WAAW;QAAK;QAC3D,SAAS,OAAO,CAAC,OAAO;QACxB,SAAS,aAAa,CAAC;QACvB,IAAI,OAAO,CAAC,SAAS,GAAG;QACxB,IAAI,OAAO,CAAC,WAAW,CAAC,SAAS,UAAU;QAE3C,MAAM,SAAS,IAAI,mKAAsB,CAAC,UAAU;QACpD,OAAO,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG;QAC1B,MAAM,GAAG,CAAC;QACV,MAAM,SAAS,IAAI,+JAAkB,CAAC;QACtC,MAAM,GAAG,CAAC;QAEV,MAAM,SAAS,IAAI,6KAAS;QAC5B,IAAI,OAA0B;QAE9B,OAAO,IAAI,CACT,KACA,CAAC;YACC,SAAS,MAAM;YACf,MAAM,WAAW,IAAI,oKAAuB,CAAC;gBAAE,aAAa;YAAK;YACjE,OAAO,IAAI,uJAAU,CAAC,UAAU;YAChC,MAAM,GAAG,CAAC;YAEV,MAAM,MAAM,IAAI,uJAAU,GAAG,aAAa,CAAC;YAC3C,MAAM,OAAO,IAAI,0JAAa;YAC9B,IAAI,OAAO,CAAC;YACZ,MAAM,SAAS,KAAK,GAAG,CAAC,KAAK,CAAC,EAAE,KAAK,CAAC,EAAE,KAAK,CAAC;YAC9C,OAAO,QAAQ,CAAC,CAAC,GAAG,SAAS;QAC/B,GACA,WACA,CAAC;YACC,QAAQ,KAAK,CAAC,mBAAmB;QACnC;QAGF,MAAM,WAAW,IAAK,wHAAqD,aAAa,CACtF,QACA,SAAS,UAAU;QAErB,SAAS,aAAa,GAAG;QAEzB,IAAI,MAAM;QACV,MAAM,UAAU;YACd,MAAM,sBAAsB;YAC5B,SAAS,MAAM;YACf,SAAS,MAAM,CAAC,OAAO;QACzB;QACA;QAEA,MAAM,WAAW;YACf,IAAI,CAAC,IAAI,OAAO,EAAE;YAClB,MAAM,IAAI,IAAI,OAAO,CAAC,WAAW;YACjC,MAAM,IAAI,IAAI,OAAO,CAAC,YAAY;YAClC,SAAS,OAAO,CAAC,GAAG;YACpB,OAAO,MAAM,GAAG,IAAI;YACpB,OAAO,sBAAsB;QAC/B;QACA,OAAO,gBAAgB,CAAC,UAAU;QAElC,OAAO;YACL,qBAAqB;YACrB,OAAO,mBAAmB,CAAC,UAAU;YACrC,SAAS,OAAO;YAChB,MAAM,KAAK;QACb;IACF,GAAG;QAAC;KAAI;IAER,qBAAO,8OAAC;QAAI,KAAK;QAAK,WAAU;;;;;;AAClC","debugId":null}}]
}